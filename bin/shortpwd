#!/bin/bash

FORMAT="%s\n"

OPTIND=1
while getopts "n" opt; do
    case "$opt" in
        n)
            FORMAT="%s"
            ;;
    esac
done
shift $((OPTIND-1))

# Arg given??
if [ ! -z $1 ]; then
    SHORTPWD=$1
else
    # Default to cwd
    SHORTPWD=`pwd`
fi

SHORTPWD=${SHORTPWD/$HOME/\~}

BODY=`echo $SHORTPWD | grep -o ".*/"`
BODY=`echo $BODY | sed 's/\(\.\)*\([^/]\)[^/]*/\1\2/g'`

TAIL=`echo $SHORTPWD | grep -o "[^/]*$"`

SHORTPWD="$BODY$TAIL"

printf $FORMAT "$SHORTPWD"
